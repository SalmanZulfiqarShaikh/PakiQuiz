document.addEventListener("DOMContentLoaded", ()=>{  // to load content effortlesly


// choosing all buttons
    const questionContainer = document.getElementById("question-container");
    const questionText = document.getElementById("question-text");
    const startButton = document.getElementById("start-btn");
    const resultMessage = document.getElementById("result-container");
    const nextButton = document.getElementById("next-btn");
    const choiceList = document.getElementById("choices-list");
    const correctSound = new Audio('audios/correctsfx.mp3');
    const wrongSound = new Audio('audios/wrongsfx.mp3');
//question(50) generated by chatGPT
    const pakistanGKQuestions = [
  {
    question: "What is the capital city of Pakistan?",
    options: ["Lahore", "Islamabad", "Karachi", "Peshawar"],
    answer: "Islamabad"
  },
  {
    question: "Who was the first Governor-General of Pakistan?",
    options: ["Liaquat Ali Khan", "Muhammad Ali Jinnah", "Ayub Khan", "Zia-ul-Haq"],
    answer: "Muhammad Ali Jinnah"
  },
  {
    question: "Which is the national language of Pakistan?",
    options: ["Urdu", "Punjabi", "Pashto", "Sindhi"],
    answer: "Urdu"
  },
  {
    question: "Which city is known as the City of Lights?",
    options: ["Karachi", "Lahore", "Islamabad", "Multan"],
    answer: "Karachi"
  },
  {
    question: "When did Pakistan become independent?",
    options: ["1947", "1956", "1948", "1971"],
    answer: "1947"
  },
  {
    question: "Who was the first female Prime Minister of Pakistan?",
    options: ["Benazir Bhutto", "Fatima Jinnah", "Hina Rabbani Khar", "Malala Yousafzai"],
    answer: "Benazir Bhutto"
  },
  {
    question: "What is the national game of Pakistan?",
    options: ["Hockey", "Cricket", "Football", "Squash"],
    answer: "Hockey"
  },
  {
    question: "Which mountain is the second highest in the world?",
    options: ["Mount Everest", "K2", "Nanga Parbat", "Broad Peak"],
    answer: "K2"
  },
  {
    question: "What is the national bird of Pakistan?",
    options: ["Chukar", "Eagle", "Peacock", "Falcon"],
    answer: "Chukar"
  },
  {
    question: "Which sea borders Pakistan?",
    options: ["Arabian Sea", "Red Sea", "Bay of Bengal", "Mediterranean Sea"],
    answer: "Arabian Sea"
  },
  {
    question: "Which desert is located in Sindh and Punjab?",
    options: ["Thar Desert", "Cholistan Desert", "Kharan Desert", "Sahara"],
    answer: "Thar Desert"
  },
  {
    question: "Which is the national tree of Pakistan?",
    options: ["Neem", "Deodar", "Peepal", "Banyan"],
    answer: "Deodar"
  },
  {
    question: "Which is the largest province by area in Pakistan?",
    options: ["Punjab", "Sindh", "Balochistan", "KPK"],
    answer: "Balochistan"
  },
  {
    question: "Which is the largest city in Pakistan?",
    options: ["Karachi", "Lahore", "Islamabad", "Faisalabad"],
    answer: "Karachi"
  },
  {
    question: "Who composed the national anthem of Pakistan?",
    options: ["Hafeez Jullundhri", "Faiz Ahmad Faiz", "Allama Iqbal", "Josh Malihabadi"],
    answer: "Hafeez Jullundhri"
  },
  {
    question: "Which Pakistani won the Nobel Prize for Physics?",
    options: ["Dr. Abdul Salam", "Dr. AQ Khan", "Dr. Samar Mubarakmand", "Dr. Ata-ur-Rahman"],
    answer: "Dr. Abdul Salam"
  },
  {
    question: "In which year did Pakistan become a nuclear power?",
    options: ["1998", "1990", "2001", "1987"],
    answer: "1998"
  },
  {
    question: "Where is Badshahi Mosque located?",
    options: ["Lahore", "Karachi", "Multan", "Islamabad"],
    answer: "Lahore"
  },
  {
    question: "Who presented the 14 Points in 1929?",
    options: ["Allama Iqbal", "Muhammad Ali Jinnah", "Sir Syed Ahmad Khan", "Liaquat Ali Khan"],
    answer: "Muhammad Ali Jinnah"
  },
  {
    question: "Which is the national flower of Pakistan?",
    options: ["Jasmine", "Rose", "Sunflower", "Lily"],
    answer: "Jasmine"
  },
  {
    question: "When was the first constitution of Pakistan enacted?",
    options: ["1956", "1947", "1962", "1973"],
    answer: "1956"
  },
  {
    question: "Which city is famous for sports goods and surgical instruments?",
    options: ["Sialkot", "Karachi", "Gujranwala", "Multan"],
    answer: "Sialkot"
  },
  {
    question: "Which is the national drink of Pakistan?",
    options: ["Sugarcane Juice", "Milk", "Lassi", "Tea"],
    answer: "Sugarcane Juice"
  },
  {
    question: "Which province is the most populous?",
    options: ["Punjab", "Sindh", "KPK", "Balochistan"],
    answer: "Punjab"
  },
  {
    question: "Where is the tomb of Allama Iqbal located?",
    options: ["Lahore", "Sialkot", "Karachi", "Islamabad"],
    answer: "Lahore"
  },
  {
    question: "What is the national anthem of Pakistan called?",
    options: ["Qaumi Tarana", "Pak Tarana", "Milli Naghma", "Watan Ki Pukar"],
    answer: "Qaumi Tarana"
  },
  {
    question: "Which is the longest river in Pakistan?",
    options: ["Indus", "Chenab", "Ravi", "Sutlej"],
    answer: "Indus"
  },
  {
    question: "Which dam is the largest in Pakistan?",
    options: ["Tarbela Dam", "Mangla Dam", "Warsak Dam", "Hub Dam"],
    answer: "Tarbela Dam"
  },
  {
    question: "Which city is known as the 'Heart of Pakistan'?",
    options: ["Lahore", "Islamabad", "Multan", "Karachi"],
    answer: "Lahore"
  },
  {
    question: "Which is the national animal of Pakistan?",
    options: ["Markhor", "Snow Leopard", "Tiger", "Lion"],
    answer: "Markhor"
  },
  {
    question: "What is the national monument of Pakistan called?",
    options: ["Minar-e-Pakistan", "Pakistan Monument", "Bab-e-Pakistan", "Chaghi Hills"],
    answer: "Pakistan Monument"
  },
  {
    question: "Which political party was founded by Muhammad Ali Jinnah?",
    options: ["All India Muslim League", "PPP", "PTI", "PML-N"],
    answer: "All India Muslim League"
  },
  {
    question: "Which city is famous for blue pottery?",
    options: ["Multan", "Karachi", "Lahore", "Hala"],
    answer: "Hala"
  },
  {
    question: "Who was the first President of Pakistan?",
    options: ["Iskander Mirza", "Ayub Khan", "Zia-ul-Haq", "Yahya Khan"],
    answer: "Iskander Mirza"
  },
  {
    question: "What is the national fruit of Pakistan?",
    options: ["Mango", "Banana", "Apple", "Orange"],
    answer: "Mango"
  },
  {
    question: "Which sport has brought Pakistan the most World Cups?",
    options: ["Hockey", "Cricket", "Squash", "Snooker"],
    answer: "Hockey"
  },
  {
    question: "Which is the oldest university in Pakistan?",
    options: ["Punjab University", "Karachi University", "NUST", "Quaid-e-Azam University"],
    answer: "Punjab University"
  },
  {
    question: "What does the white color in Pakistan's flag represent?",
    options: ["Religious minorities", "Peace", "Unity", "Snow"],
    answer: "Religious minorities"
  },
  {
    question: "What is the national insect of Pakistan?",
    options: ["Honeybee", "Butterfly", "Ladybug", "Dragonfly"],
    answer: "Honeybee"
  },
  {
    question: "Which Pakistani won the Nobel Peace Prize in 2014?",
    options: ["Malala Yousafzai", "Abdul Sattar Edhi", "Benazir Bhutto", "Imran Khan"],
    answer: "Malala Yousafzai"
  },
  {
    question: "What is the national dress of Pakistan?",
    options: ["Shalwar Kameez", "Kurta Pajama", "Sherwani", "Sari"],
    answer: "Shalwar Kameez"
  },
  {
    question: "Which is the national mosque of Pakistan?",
    options: ["Faisal Mosque", "Badshahi Mosque", "Data Darbar", "Shah Jahan Mosque"],
    answer: "Faisal Mosque"
  },
  {
    question: "Which Pakistani city is famous for mangoes?",
    options: ["Multan", "Faisalabad", "Hyderabad", "Sargodha"],
    answer: "Multan"
  },
  {
    question: "When was the Lahore Resolution passed?",
    options: ["23rd March 1940", "14th August 1947", "11th September 1948", "26th January 1930"],
    answer: "23rd March 1940"
  },
  {
    question: "What is the name of Pakistan's intelligence agency?",
    options: ["ISI", "CIA", "RAW", "MI6"],
    answer: "ISI"
  },
  {
    question: "What is the literacy rate of Pakistan (approx)?",
    options: ["58%", "78%", "67%", "83%"],
    answer: "58%"
  },
  {
    question: "Which Pakistani river originates from Tibet?",
    options: ["Indus", "Ravi", "Chenab", "Jhelum"],
    answer: "Indus"
  },
  {
    question: "Which Pakistani city is known as the 'City of Saints'?",
    options: ["Multan", "Lahore", "Karachi", "Peshawar"],
    answer: "Multan"
  }
];
let currentQuestionIndex = 0;
let score = 0;
let shuffledQuestions = [];


function getRandomQuestions(num) {
  let shuffledQuestions = [];
     const usedIndexes = new Set();

    while (shuffledQuestions.length < num) {
      const randomIndex = Math.floor(Math.random()*pakistanGKQuestions.length);

      if (!usedIndexes.has(randomIndex)) {
        shuffledQuestions.push(pakistanGKQuestions[randomIndex]);
        usedIndexes.add(randomIndex);
      }
    }
    return shuffledQuestions;

}

startButton.addEventListener("click",()=>{
   startButton.classList.add("hidden");
   resultMessage.classList.add("hidden");
    questionContainer.classList.remove("hidden");
    shuffledQuestions = getRandomQuestions(5);
    currentQuestionIndex = 0;
    score = 0;
    showQuestion();
  }
)


function showQuestion() {
  choiceList.innerHTML = "";
  nextButton.classList.add("hidden");
  const currentQuestion = shuffledQuestions[currentQuestionIndex];
  questionText.textContent = `Q${currentQuestionIndex+1})  ${currentQuestion.question}`;

      currentQuestion.options.forEach(option => {
      const li = document.createElement("li");
      li.textContent = option;
      li.classList.add("option");
      choiceList.appendChild(li)


      li.addEventListener("click",()=> handleAnser(option, currentQuestion.answer));
      });

};

function handleAnser(selected,correct) {
     const options = document.querySelectorAll(".option");
       options.forEach(opt => opt.style.pointerEvents = "none"); // to prevent double click
     options.forEach(opt => {
        if (opt.textContent === correct) {
           opt.classList.add("correct")
        } else if (opt.textContent === selected) {
        opt.classList.add("incorrect");
      }
    });

    if (selected === correct) {
      correctSound.currentTime = 0;
      correctSound.play()
      score++;
    } else {
      wrongSound.currentTime = 0;
      wrongSound.play();
    }
    nextButton.classList.remove("hidden");

}

nextButton.addEventListener("click", ()=>{

  currentQuestionIndex++;
  if (currentQuestionIndex < shuffledQuestions.length) {
     showQuestion();
  } else {
    showResult();
  }
})

function getEmoji(score) {
    switch(score) {
        case 0:
            return "😭";
        case 1:
            return "😢"; 
        case 2:
            return "😐";
        case 3:
            return "🙂"; 
        case 4:
            return "😃"; 
        case 5:
            return "🤩"; 
        default:
            return "";
    }
}

function getMsg(score) {
  if (score <= 2) {
    return "Try Improving Your Knowledge About Pakistan";
  } else if (score <= 4) {
    return "Wow You're Quite Knowledgeable About Pakistan";
  } else if (score === 5) {
    return "Seems like You know Everything About Pakistan";
  } else {
    return "";
  }
}


function showResult() {
  questionContainer.classList.add("hidden");
  resultMessage.classList.remove("hidden");
  const msg = getMsg(score);
  const emoji = getEmoji(score);
    resultMessage.innerHTML = `<h2>Your Score:</h2>
        <p id="score">${score}/${shuffledQuestions.length} ${emoji}</p>
        <button id="restart-btn">Restart Quiz</button>
        <br>
        <br>
        <p>${msg}</p>`;

        const restartBtn = document.getElementById("restart-btn");
        restartBtn.addEventListener("click",restart)
}

function restart() {
  location.reload();
}
});